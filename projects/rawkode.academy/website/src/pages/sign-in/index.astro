---
import Layout from "@/layouts/minimal.astro";
import SignIn from "@/components/auth/SignIn.vue";
import logoUrl from "@/components/branding/logos/logo.svg?url";

export const prerender = false;

const user = Astro.locals.user;

if (user) {
	return Astro.redirect("/");
}

const returnTo = Astro.url.searchParams.get("returnTo") || "/";
---

<Layout title="Sign In - Rawkode Academy" description="Sign in to Rawkode Academy to access exclusive content and features.">
	<div class="min-h-screen flex flex-col items-center justify-center px-4 py-12 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-black">
		<div class="w-full max-w-md">
			<div class="text-center mb-8">
				<a href="/" class="inline-block mb-6">
					<img src={logoUrl} alt="Rawkode Academy" class="h-12 w-auto mx-auto dark:invert" />
				</a>
				<h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">
					Welcome back
				</h1>
				<p class="text-gray-600 dark:text-gray-400">
					Sign in to continue to Rawkode Academy
				</p>
			</div>

			<SignIn client:load returnTo={returnTo} />

			<p class="mt-8 text-center text-sm text-gray-500 dark:text-gray-400">
				By signing in, you agree to our
				<a href="/terms" class="text-primary hover:underline">Terms of Service</a>
				and
				<a href="/privacy" class="text-primary hover:underline">Privacy Policy</a>.
			</p>
		</div>
	</div>
</Layout>
